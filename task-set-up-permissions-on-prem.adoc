---
sidebar: sidebar 
permalink: task-set-up-permissions-on-prem.html 
keywords: set up permissions, cloud permissions, aws permissions, azure permissions, on prem permissions, connector permissions 
summary: AWS 또는 Azure에서 BlueXP 서비스를 온프레미스 커넥터와 함께 사용하려면 클라우드 공급자에 권한을 설정해야 자격 증명을 설치한 후 Connector에 추가할 수 있습니다. 
---
= 온프레미스 구축을 위한 클라우드 권한 설정
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
온-프레미스 커넥터가 있는 AWS 또는 Azure에서 BlueXP 서비스를 사용하려면 클라우드 공급자에 권한을 설정해야 자격 증명을 설치한 후 Connector에 추가할 수 있습니다.


TIP: Google Cloud가 적합하지 않은 이유 Connector가 구내에 설치되어 있으면 Google Cloud에서 리소스를 관리할 수 없습니다. Connector를 Google Cloud에 설치하여 그 안에 있는 모든 리소스를 관리해야 합니다.

[role="tabbed-block"]
====
.설치하고
--
Connector가 사내에 설치된 경우 필요한 권한이 있는 IAM 사용자에 대한 액세스 키를 추가하여 BlueXP에 AWS 권한을 제공해야 합니다.

Connector가 구내에 설치된 경우 이 인증 방법을 사용해야 합니다. IAM 역할을 사용할 수 없습니다.

.단계
. IAM 콘솔에서 정책을 생성합니다.
+
.. 정책 > 정책 생성 * 을 클릭합니다.
.. JSON * 을 선택하고 의 내용을 복사하여 붙여 넣습니다 link:reference-permissions-aws.html["Connector에 대한 IAM 정책"].
.. 나머지 단계를 완료하고 정책을 생성합니다.
+
사용할 BlueXP 서비스에 따라 두 번째 정책을 만들어야 할 수도 있습니다.

+
표준 영역의 경우 권한이 두 정책에 분산됩니다. AWS에서 관리되는 정책의 최대 문자 크기 제한으로 인해 두 개의 정책이 필요합니다. link:reference-permissions-aws.html["Connector에 대한 IAM 정책에 대해 자세히 알아보십시오"].



. IAM 사용자에게 정책을 연결합니다.
+
** https://["AWS 설명서: IAM 역할 생성"^]
** https://["AWS 설명서: IAM 정책 추가 및 제거"^]


. 커넥터를 설치한 후 BlueXP에 추가할 수 있는 액세스 키가 사용자에게 있는지 확인합니다.


.결과
이제 필요한 권한이 있는 IAM 사용자를 위한 액세스 키가 있어야 합니다. Connector를 설치한 후 이러한 자격 증명을 BlueXP의 커넥터와 연결해야 합니다.

link:task-provide-permissions-on-prem.html["이러한 권한을 BlueXP에 제공하는 방법을 알아보십시오"].

--
.Azure를 지원합니다
--
Connector가 사내에 설치된 경우 Azure Active Directory에 서비스 보안 주체를 설정하고 BlueXP에 필요한 Azure 자격 증명을 획득하여 BlueXP에 Azure 권한을 제공해야 합니다.

.역할 기반 액세스 제어를 위해 Azure Active Directory 응용 프로그램을 만듭니다
. Azure에서 Active Directory 응용 프로그램을 만들고 응용 프로그램을 역할에 할당할 수 있는 권한이 있는지 확인합니다.
+
자세한 내용은 을 참조하십시오 https://["Microsoft Azure 문서: 필요한 권한"^].

. Azure 포털에서 * Azure Active Directory * 서비스를 엽니다.
+
image:screenshot_azure_ad.gif["에는 Microsoft Azure의 Active Directory 서비스가 나와 있습니다."]

. 메뉴에서 * 앱 등록 * 을 클릭합니다.
. 새 등록 * 을 클릭합니다.
. 응용 프로그램에 대한 세부 정보를 지정합니다.
+
** * 이름 *: 응용 프로그램의 이름을 입력합니다.
** * 계정 유형 *: 계정 유형을 선택합니다(모두 BlueXP에서 사용 가능).
** * URI 리디렉션 *: 이 필드는 비워 둘 수 있습니다.


. Register * 를 클릭합니다.
+
AD 응용 프로그램 및 서비스 보안 주체를 만들었습니다.



.애플리케이션에 역할을 할당합니다
. 사용자 지정 역할 만들기:
+
.. 의 내용을 복사합니다 link:reference-permissions-azure.html["Connector에 대한 사용자 지정 역할 권한"] JSON 파일에 저장합니다.
.. 할당 가능한 범위에 Azure 구독 ID를 추가하여 JSON 파일을 수정합니다.
+
사용자가 Cloud Volumes ONTAP 시스템을 생성할 각 Azure 구독에 대한 ID를 추가해야 합니다.

+
* 예 *

+
[source, json]
----
"AssignableScopes": [
"/subscriptions/d333af45-0d07-4154-943d-c25fbzzzzzzz",
"/subscriptions/54b91999-b3e6-4599-908e-416e0zzzzzzz",
"/subscriptions/398e471c-3b42-4ae7-9b59-ce5bbzzzzzzz"
----
.. JSON 파일을 사용하여 Azure에서 사용자 지정 역할을 생성합니다.
+
다음 단계에서는 Azure Cloud Shell에서 Bash를 사용하여 역할을 생성하는 방법을 설명합니다.

+
*** 시작 https://["Azure 클라우드 셸"^] Bash 환경을 선택하십시오.
*** JSON 파일을 업로드합니다.
+
image:screenshot_azure_shell_upload.png["파일을 업로드하는 옵션을 선택할 수 있는 Azure Cloud Shell의 스크린 샷"]

*** Azure CLI를 사용하여 사용자 지정 역할을 생성합니다.
+
[source, azurecli]
----
az role definition create --role-definition Connector_Policy.json
----
+
이제 Connector 가상 머신에 할당할 수 있는 BlueXP Operator라는 사용자 지정 역할이 있어야 합니다.





. 역할에 응용 프로그램을 할당합니다.
+
.. Azure 포털에서 * Subscriptions * 서비스를 엽니다.
.. 구독을 선택합니다.
.. IAM(Access Control) > 추가 > 역할 할당 추가 * 를 클릭합니다.
.. Role * 탭에서 * BlueXP Operator * 역할을 선택하고 * Next * 를 클릭합니다.
.. Members* 탭에서 다음 단계를 완료합니다.
+
*** 사용자, 그룹 또는 서비스 보안 주체 * 를 선택한 상태로 유지합니다.
*** 구성원 선택 * 을 클릭합니다.
+
image:screenshot-azure-service-principal-role.png["애플리케이션에 역할을 추가할 때 구성원 탭을 표시하는 Azure 포털의 스크린샷"]

*** 응용 프로그램의 이름을 검색합니다.
+
예를 들면 다음과 같습니다.

+
image:screenshot_azure_service_principal_role.png["Azure 포털에서 역할 할당 추가 양식을 보여 주는 Azure 포털의 스크린샷"]

*** 응용 프로그램을 선택하고 * 선택 * 을 클릭합니다.
*** 다음 * 을 클릭합니다.


.. 검토 + 할당 * 을 클릭합니다.
+
이제 서비스 보안 주체에 Connector를 배포하는 데 필요한 Azure 권한이 있습니다.

+
여러 Azure 구독에서 Cloud Volumes ONTAP를 배포하려면 서비스 보안 주체를 해당 구독 각각에 바인딩해야 합니다. BlueXP를 사용하면 Cloud Volumes ONTAP를 배포할 때 사용할 구독을 선택할 수 있습니다.





.Windows Azure 서비스 관리 API 권한을 추가합니다
. Azure Active Directory * 서비스에서 * 앱 등록 * 을 클릭하고 응용 프로그램을 선택합니다.
. API 권한 > 권한 추가 * 를 클릭합니다.
. Microsoft API * 에서 * Azure Service Management * 를 선택합니다.
+
image:screenshot_azure_service_mgmt_apis.gif["Azure 서비스 관리 API 권한을 보여 주는 Azure 포털의 스크린샷"]

. Access Azure Service Management as organization users * 를 클릭한 다음 * Add permissions * 를 클릭합니다.
+
image:screenshot_azure_service_mgmt_apis_add.gif["Azure 서비스 관리 API 추가를 보여 주는 Azure 포털의 스크린샷"]



.응용 프로그램의 응용 프로그램 ID 및 디렉터리 ID를 가져옵니다
. Azure Active Directory * 서비스에서 * 앱 등록 * 을 클릭하고 응용 프로그램을 선택합니다.
. 응용 프로그램(클라이언트) ID * 와 * 디렉터리(테넌트) ID * 를 복사합니다.
+
image:screenshot_azure_app_ids.gif["Azure Active Directory의 응용 프로그램에 대한 응용 프로그램(클라이언트) ID 및 디렉터리(테넌트) ID를 보여 주는 스크린샷"]

+
Azure 계정을 BlueXP에 추가하는 경우 응용 프로그램의 응용 프로그램(클라이언트) ID와 디렉터리(테넌트) ID를 제공해야 합니다. BlueXP는 ID를 사용하여 프로그래밍 방식으로 로그인합니다.



.클라이언트 암호를 생성합니다
. Azure Active Directory * 서비스를 엽니다.
. 앱 등록 * 을 클릭하고 응용 프로그램을 선택합니다.
. 인증서 및 비밀 > 새 클라이언트 비밀 * 을 클릭합니다.
. 비밀과 기간에 대한 설명을 제공하십시오.
. 추가 * 를 클릭합니다.
. 클라이언트 암호 값을 복사합니다.
+
image:screenshot_azure_client_secret.gif["Azure AD 서비스 보안 주체에 대한 클라이언트 암호를 보여 주는 Azure 포털의 스크린샷"]

+
이제 BlueXP에서 Azure AD를 인증하는 데 사용할 수 있는 클라이언트 암호가 있습니다.



.결과
이제 서비스 보안 주체가 설정되었으므로 응용 프로그램(클라이언트) ID, 디렉터리(테넌트) ID 및 클라이언트 암호 값을 복사해야 합니다. Connector를 설치한 후 이러한 자격 증명을 BlueXP의 커넥터와 연결해야 합니다.

link:task-provide-permissions-on-prem.html["이러한 권한을 BlueXP에 제공하는 방법을 알아보십시오"].

--
====